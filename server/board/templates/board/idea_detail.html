<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ idea.title }} — StudioBoard</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 0; background: #0b0f17; color: #e6edf3; }
    header { padding: 18px 20px; border-bottom: 1px solid rgba(255,255,255,.08); background: rgba(255,255,255,.02); }
    .wrap { max-width: 980px; margin: 0 auto; padding: 18px 20px; }
    .panel { background: rgba(255,255,255,.04); border: 1px solid rgba(255,255,255,.08); border-radius: 14px; padding: 14px; }
    .title { font-size: 20px; font-weight: 780; margin: 0 0 6px; }
    .sub { opacity: .8; font-size: 12px; display:flex; gap:10px; flex-wrap:wrap; }
    .pill { padding: 2px 8px; border-radius: 999px; background: rgba(255,255,255,.06); border: 1px solid rgba(255,255,255,.10); }
    .tag { padding: 2px 8px; border-radius: 999px; background: rgba(56,189,248,.12); border: 1px solid rgba(56,189,248,.25); }
    pre, code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
    .md { white-space: pre-wrap; line-height: 1.55; margin-top: 12px; }
    .actions { display:flex; gap:10px; }
    .btn {
      display:inline-block; padding:10px 14px; border-radius: 12px; text-decoration:none;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(56,189,248,.14);
      color: #e6edf3;
      font-weight: 650;
    }
    .btn.secondary { background: transparent; }
    .grid { display:grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 14px; }
    .kv { font-size: 12px; opacity: .9; }
    .kv b { opacity: 1; }
    .md { line-height: 1.65; margin-top: 12px; }
.md h1, .md h2, .md h3 { margin: 16px 0 8px; }
.md p { margin: 10px 0; }
.md ul, .md ol { margin: 10px 0 10px 22px; }
.md blockquote {
  margin: 12px 0;
  padding: 10px 12px;
  border-left: 3px solid rgba(56,189,248,.45);
  background: rgba(56,189,248,.06);
  border-radius: 10px;
}
.md a { color: #7dd3fc; text-decoration: none; }
.md a:hover { text-decoration: underline; }

.md pre {
  padding: 12px;
  border-radius: 12px;
  overflow-x: auto;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.10);
}
.md code {
  padding: 2px 6px;
  border-radius: 8px;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.10);
}

.md table {
  width: 100%;
  border-collapse: collapse;
  margin: 12px 0;
  overflow: hidden;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.10);
}
.md th, .md td {
  padding: 10px 10px;
  border-bottom: 1px solid rgba(255,255,255,.08);
}
.md thead th {
  background: rgba(255,255,255,.06);
  font-weight: 700;
}
  </style>
</head>
<body>
  <header>
    <div style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
      <div>
        <div style="opacity:.8; font-size:12px;">StudioBoard</div>
        <div style="font-size:18px; font-weight:750;">{{ board.name }}</div>
      </div>

      <div class="actions">
        <a class="btn secondary" href="{% url 'board:kanban' board.id %}">← Retour</a>
        <!-- Edition via l'admin (pratique tant qu'on n'a pas de page edit) -->
        <a class="btn" href="{% url 'board:idea_edit' board.id idea.id %}">Modifier</a>
        <a class="btn secondary" href="{% url 'board:idea_save_template' board.id idea.id %}">Sauver comme template</a>
      </div>
    </div>
  </header>

  <div class="wrap">
    <div class="panel">
      <h1 class="title">{{ idea.title }}</h1>

      <div class="sub">
        <span class="pill">Colonne : <b>{{ idea.column.name }}</b></span>
        <span class="pill">Statut : <b>{{ idea.get_status_display }}</b></span>
        <span class="pill">Impact : <b>{{ idea.impact }}</b></span>
        {% if idea.next_action %}
          <span class="pill">Next : <b>{{ idea.next_action }}</b></span>
        {% endif %}
      </div>

      <div style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap;">
        {% for tag in idea.tags.all %}
          <span class="tag">#{{ tag.name }}</span>
        {% empty %}
          <span class="pill" style="opacity:.7;">Aucun tag</span>
        {% endfor %}
      </div>

      <div class="grid">
        <div class="kv"><b>Créée :</b> {{ idea.created_at }}</div>
        <div class="kv"><b>Modifiée :</b> {{ idea.updated_at }}</div>
      </div>

      <div class="md">
  {% if idea.body_md %}
    {{ idea_html|safe }}
  {% else %}
    <span style="opacity:.7;">Aucune description pour le moment.</span>
  {% endif %}
</div>
    </div>
  </div>
</body>
</html>